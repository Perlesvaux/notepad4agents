<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>



<script>
function sell (schedule)
    {

        const IATA_airlines = {
            "ABX Air":'GB',
            "Aegean Airlines":'A3',
            "Aer Lingus":'EI',
            "Aero Republica":'P5',
            "Aeroflot":'SU',
            "Aerolineas Argentinas":'AR',
            "Aeromar":'VW',
            "Aeromexico":'AM',
            "Africa World Airlines":'AW',
            "Air Alg√©rie":'AH',
            "Air Arabia":'G9',
            "Air Astana":'KC',
            "Air Austral":'UU',
            "Air Baltic":'BT',
            "Air Botswana":'BP',
            "Air Burkina":'2J',
            "Air Cairo":'SM',
            "Air Caledonie":'TY',
            "Air Canada":'AC',
            "Air Caraibes":'TX',
            "Air China":'CA',
            "Air Corsica":'XK',
            "Air Dolomiti":'EN',
            "Air Europa":'UX',
            "Air France":'AF',
            "Air Guilin":'GT',
            "Air India":'AI',
            "Air Koryo":'JS',
            "Air Macau":'NX',
            "Air Madagascar":'MD',
            "Air Malta":'KM',
            "Air Mauritius":'MK',
            "Air Moldova":'9U',
            "Air New Zealand":'NZ',
            "Air Niugini":'PX',
            "Air Nostrum":'YW',
            "Air Peace":'P4',
            "Air Serbia":'JU',
            "Air Seychelles":'HM',
            "Air Tahiti":'VT',
            "Air Tahiti Nui":'TN',
            "Air Tanzania":'TC',
            "Air Transat":'TS',
            "Air Vanuatu":'NF',
            "AirBridgeCargo Airlines":'RU',
            "Aircalin":'SB',
            "Airlink":'4Z',
            "Alaska Airlines":'AS',
            "Albastar":'AP',
            "Allied Air":'4W',
            "AlMasria Universal Airlines":'UJ',
            "American Airlines":'AA',
            "ANA":'NH',
            "APG Airlines":'GP',
            "Arkia Israeli Airlines":'IZ',
            "Asiana Airlines":'OZ',
            "ASKY":'KP',
            "ASL Airlines France":'5O',
            "Atlantic Airways":'RC',
            "Atlas Air":'5Y',
            "Austrian Airlines":'OS',
            "Avianca":'AV',
            "Avianca Costa Rica":'LR',
            "Avianca Ecuador":'2K',
            "Azerbaijan Airlines":'J2',
            "Azores Airlines":'S4',
            "Azul Brazilian Airlines":'AD',
            "Badr Airlines":'J4',
            "Bahamasair":'UP',
            "Bamboo Airways":'QH',
            "Bangkok Airways":'PG',
            "Batik Air":'ID',
            "Batik Air Malaysia":'OD',
            "Biman Bangladesh Airlines":'BG',
            "Binter Canarias":'NT',
            "Blue Air":'0B',
            "BoA Boliviana de Aviacion":'OB',
            "Braathens Regional Airways":'TF',
            "British Airways":'BA',
            "Brussels Airlines":'SN',
            "Bulgaria Air":'FB',
            "Camair-Co":'QC',
            "Cambodia Angkor Air":'K6',
            "Capital Airlines":'JD',
            "Cargojet Airways":'W8',
            "Cargolux":'CV',
            "Caribbean Airlines":'BW',
            "Carpatair":'V3',
            "Cathay Pacific":'CX',
            "Cebu Pacific":'5J',
            "Challenge Airlines":'5C',
            "China Airlines":'CI',
            "China Cargo Airlines":'CK',
            "China Eastern":'MU',
            "China Express Airlines":'G5',
            "China Postal Airlines":'CF',
            "China Southern Airlines":'CZ',
            "CityJet":'WX',
            "Condor":'DE',
            "Congo Airways":'8Z',
            "Copa":'CM',
            "Corendon Airlines":'XC',
            "Corsair International":'SS',
            "Croatia Airlines":'OU',
            "Cubana":'CU',
            "Cyprus Airways":'CY',
            "Czech Airlines":'OK',
            "Delta Air Lines":'DL',
            "Delta":'DL',
            "DHL Air":'D0',
            "DHL Aviation":'ES',
            "Eastern Airlines":'2D',
            "Eastern Airways":'T3',
            "Egyptair":'MS',
            "EL AL":'LY',
            "Emirates":'EK',
            "Ethiopian Airlines":'ET',
            "Etihad Airways":'EY',
            "EuroAtlantic Airways":'YU',
            "European Air Transport":'QY',
            "Eurowings":'EW',
            "EVA Air":'BR',
            "Evelop Airlines":'E9',
            "FedEx Express":'FX',
            "Fiji Airways":'FJ',
            "Finnair":'AY',
            "Fly Baghdad":'IF',
            "flydubai":'FZ',
            "FlyEgypt":'FT',
            "Flynas":'XY',
            "FLYONE":'5F',
            "French Bee":'BF',
            "Fuzhou Airlines":'FU',
            "Garuda Indonesia":'GA',
            "Georgian Airways":'A9',
            "German Airways":'ZQ',
            "GOL Linhas Aereas":'G3',
            "Gulf Air":'GF',
            "GX Airlines":'GX',
            "Hahn Air":'HR',
            "Hainan Airlines":'HU',
            "Hawaiian Airlines":'HA',
            "Hebei Airlines":'NS',
            "Hong Kong Air Cargo":'RH',
            "Hong Kong Airlines":'HX',
            "Hong Kong Express Airways":'UO',
            "IBERIA":'IB',
            "Icelandair":'FI',
            "IndiGo":'6E',
            "Iran Air":'IR',
            "Iran Airtour Airline":'B9',
            "Iran Aseman Airlines":'EP',
            "Israir":'6H',
            "ITA Airways":'AZ',
            "Japan Airlines":'JL',
            "Japan Transocean Air":'NU',
            "Jazeera Airways":'J9',
            "Jeju Air":'7C',
            "JetBlue Airways":'B6',
            "Jin Air":'LJ',
            "Jordan Aviation":'R5',
            "Juneyao Airlines":'HO',
            "Kam Air":'RQ',
            "Kenya Airways":'KQ',
            "KLM":'KL',
            "Korean Air":'KE',
            "Kunming Airlines":'KY',
            "Kuwait Airways":'KU',
            "La Compagnie":'B0',
            "LAM":'TM',
            "Lao Airlines":'QV',
            "LATAM Airlines Brasil":'JJ',
            "LATAM Airlines Colombia":'4C',
            "LATAM Airlines Ecuador":'XL',
            "LATAM Airlines Group":'LA',
            "LATAM Airlines Paraguay":'PZ',
            "LATAM Airlines Peru":'LP',
            "LATAM Cargo Brasil":'M3',
            "LATAM Cargo Chile":'UC',
            "Loong Air":'GJ',
            "LOT Polish Airlines":'LO',
            "Lucky Air":'8L',
            "Lufthansa":'LH',
            "Lufthansa Cargo":'LH',
            "Lufthansa CityLine":'CL',
            "Luxair":'LG',
            "Malaysia Airlines":'MH',
            "Mandarin Airlines":'AE',
            "Martinair Cargo":'MP',
            "MasAir":'M7',
            "Mauritania Airlines International":'L6',
            "MEA":'ME',
            "MIAT Mongolian Airlines":'OM',
            "MNG Airlines":'MB',
            "Myanmar Airways International":'8M',
            "National Airlines":'N8',
            "NCA Nippon Cargo Airlines":'KZ',
            "Neos":'NO',
            "Nesma Airlines":'NE',
            "Nile Air":'NP',
            "NordStar":'Y7',
            "Nordwind Airlines":'N4',
            "Nouvelair":'BJ',
            "Okay Airways":'BK',
            "Olympic Air":'OA',
            "Oman Air":'WY',
            "Paranair":'ZP',
            "Pegas Fly":'EO',
            "Pegasus Airlines":'PC',
            "PGA-Portugalia Airlines":'NI',
            "Philippine Airlines":'PR',
            "PIA Pakistan International Airlines":'PK',
            "Polar Air Cargo":'PO',
            "Poste Air Cargo":'M4',
            "Precision Air":'PW',
            "Privilege Style":'P6',
            "Qantas":'QF',
            "Qatar Airways":'QR',
            "Ravn Alaska":'7H',
            "Rossiya Airlines":'FV',
            "Royal Air Maroc":'AT',
            "Royal Brunei":'BI',
            "Royal Jordanian":'RJ',
            "Ruili Airlines":'DR',
            "RusLine":'7R',
            "RwandAir":'WB',
            "S7 Airlines":'S7',
            "Safair":'FA',
            "SAS":'SK',
            "SATA Air Acores":'SP',
            "Saudi Arabian Airlines":'SV',
            "SCAT Airlines":'DV',
            "SF Airlines":'O3',
            "Shandong Airlines":'SC',
            "Shanghai Airlines":'FM',
            "Shenzhen Airlines":'ZH',
            "Sichuan Airlines":'3U',
            "Silk Way West Airlines":'7L',
            "Singapore Airlines":'SQ',
            "SKY Airline":'H2',
            "Smartavia":'5N',
            "Smartwings":'QS',
            "Solomon Airlines":'IE',
            "Somon Air":'SZ',
            "South African Airways":'SA',
            "SpiceJet":'SG',
            "SriLankan Airlines":'UL',
            "SunExpress":'XQ',
            "Suparna Airlines":'Y8',
            "SWISS":'LX',
            "Syrianair":'RB',
            "T way Air":'TW',
            "TAAG Angola Airlines":'DT',
            "TACA":'TA',
            "TAP Portugal":'TP',
            "TAROM":'RO',
            "Tassili Airlines":'SF',
            "Thai Airways International":'TG',
            "Thai Lion Air":'SL',
            "Thai Smile":'WE',
            "Tianjin Airlines":'GS',
            "TUIfly":'X3',
            "Tunisair":'TU',
            "Turkish Airlines":'TK',
            "Ukraine International Airlines":'PS',
            "UNI AIR":'B7',
            "United Airlines":'UA',
            "United":'UA',
            "UPS Airlines":'5X',
            "Ural Airlines":'U6',
            "Urumqi Air":'UQ',
            "UTair":'UT',
            "Uzbekistan Airways":'HY',
            "Vietjet":'VJ',
            "Vietnam Airlines":'VN',
            "Virgin Atlantic":'VS',
            "Virgin Australia":'VA',
            "Vistara":'UK',
            "Volaris":'Y4',
            "Volotea":'V7',
            "Vueling":'VY',
            "Wamos Air":'EB',
            "West Air":'PN',
            "WestJet":'WS',
            "White coloured by you":'WI',
            "Wideroe":'WF',
            "World2Fly":'2W',
            "Xiamen Airlines":'MF',
            "YTO Cargo Airlines":'YG',
            "Swiss International Air Lines":'LX',
            "TACA Airlines":'TA'
        }

        //Regex selectors!
        const flight        = /flight\n.+\d/g
        const cos           = /\([a-zA-Z]\)/g
        const date2         = /\(...\)\n\nA.*/g
        const date1         = /‚Ä¢.*[A-Z][a-z][a-z][ ]\d+/g
        const airports      = /[A-Z][A-Z][A-Z](?=\))/g
        const re_departure  = /Departure\d+:\d+[a-z]+/g
        const re_arrival    = /Arrival\d+:\d+[a-z]+/g
        const layovers      = /Layover.*/g
        
        const _flight       = schedule.match(flight)
        const _cos          = schedule.match(cos)
        const _cities       = schedule.match(airports)

        const _departure    = schedule.match(re_departure)
        const _arrival      = schedule.match(re_arrival)
        const _layovers     = schedule.match(layovers)
        const _date1        = schedule.match(date1)
        const _day1         = _date1[0].match(/[A-Z][a-z][a-z] \d+/)[0]
        //const _day1         = `${_date1.join().match(/[A-Z][a-z][a-z] \d+/g)[0].split(' ')[1]} ${_date1.join().match(/[A-Z][a-z][a-z] \d+/g)[0].split(' ')[0]}` //.join().match(/s/g) // i.e.: 31 Mar
        const _date2        = schedule.match(date2)
              

        function calculate_arrival_date(date_input, phours, pmins)
        {

            if (date_input === '') {
                return 'Error: No departure date supplied!'
            }

            // If you don't say how many days to add, days_of_commuting.value is '', which will be converted to 0 right below, so no worries.

            /////const days_until_arrival = Number(days_of_commuting)

            const hours = Number(phours)
            const mins  = Number(pmins)

            // ! In the next code line, if you don't specify a time, the Date constructor thinks its input string represents a date in UTC instead of your local time. Why that would be bad?:

            // If you enter december 31 in the calendar, when it gets converted to a date below, it would represent hour 0 (12 AM) of december 31 UTF, which is hour 18 (6 PM) of december 30 in our local time. The problem is that setDate(), used below, alters the LOCAL TIME DAY, so if you add 1 day of travel, you add it to december 30 (not to december 31 which was your input), thus you'd get the absurd output that if you depart on december 31 and arrive after 1 day, you arrive on the same day (december 31)...

            const arrival_date = new Date(`${date_input} ${new Date().getFullYear()}`)

            


            // arrival_date.setDate(
            //     arrival_date.getDate()
            //     + days_until_arrival
            // )


            arrival_date.setTime(
                arrival_date.getTime()
                + mins * 60 * 1000
            ) 
            console.log(arrival_date);

            
            arrival_date.setTime(
                arrival_date.getTime()
                + hours * 60 * 60 * 1000 
                
            )


            

            console.log(arrival_date);
            // In case you think you entered a number when you didn't, I'll let you know if no days were added:


            return arrival_date.toDateString()
                
                

            // return days_until_arrival === 0
            //     ? `${arrival_date.toDateString()} (no days added!)`
            //     : arrival_date.toDateString()
        }      



        //console.log(calculate_arrival_date(_day1, 22, 50))

        

        try {
            for (x of _layovers) {
            let hh = x.match(/\d+(?=h)/);
            let mm = x.match(/\d+(?=m)/);
            console.log(calculate_arrival_date(_day1, hh, mm))
        }
        } catch (error) {
         console.log('Direct flight!');   
        }
        

        


        let first_city  = 0
        let second_city = 1
        let output      = ""

        for (let i=0; i<_flight.length; i++)
        {
            let f_al = _flight[i].match(/[a-zA-Z ]+/g).join('').substr(6, ).trim() //American Airlines
            let f_nb = _flight[i].match(/\d+/)

            output += `SS ${IATA_airlines[f_al]} ${f_nb} ${_cos[i][1]} ${_cities[first_city]}${_cities[second_city]}  ${_departure[i]} ${_arrival[i]} 1\n`
            first_city+=2
            second_city+=2
            //output += `\u{02708}${allnbrs[i].toUpperCase()} ${alldates[i].toUpperCase()} ${allroutes[i].toUpperCase()} ${translate(allscheds[i].slice(0,4))} ${translate(allscheds[i].slice(5))}\n`

        }

        return output
    
        

//vs. ${IATA_airlines['American Airlines']}`


        

    }

    const testdict = {'elpepe':':vs  vs:', 'etsech':'):<vs  >:(vs'}
    const testlist = testdict['elpepe'].match(/vs/g).join().match(/s/g)
    console.log(testlist);
    
    






//     console.log(sell(`
// San Salvador to New York
// 5:40am - 2:59pm (8h 19m, 1 stop)5:40am through 2:59pm (8h 19m, 1 stop)

// American Airlines ‚Ä¢ Fri, Mar 31
// Departure5:40am - San Salvador
// El Salvador Intl. (SAL)

// 3h 39m flight
// American Airlines 1408
// Boeing 737-800
// Economy/Coach (S)
// Arrival10:19am - Miami
// Miami Intl. (MIA)

// Layover: 1h 40m in Miami
// Departure11:59am - Miami
// Miami Intl. (MIA)

// 3h flight
// American Airlines 1479
// Boeing 737 MAX 8
// Economy/Coach (S)
// Arrival2:59pm - New York
// John F. Kennedy Intl. (JFK)

// Hide details

// `))







// console.log(sell(`
// San Salvador to New York
// 12:03pm - 11:42am (22h 39m, 1 stop)12:03pm through 11:42am (22h 39m, 1 stop)+1Arrives Sat, Apr 1

// American Airlines ‚Ä¢ Fri, Mar 31
// Departure12:03pm - San Salvador
// El Salvador Intl. (SAL)

// 3h 39m flight
// American Airlines 1494
// Boeing 737-800
// Economy/Coach (G)
// Arrival4:42pm - Miami
// Miami Intl. (MIA)

// Layover: 16h in Miami
// Departure8:42am - Miami
// Miami Intl. (MIA)

// 3h flight
// American Airlines 1831
// Economy/Coach (G)
// Arrival11:42am - New York
// John F. Kennedy Intl. (JFK)

// Hide details
// `))


// console.log(sell(    `
// Salt Lake City to Orlando
// 6:40am - 1:00pm (4h 20m, nonstop)6:40am through 1:00pm (4h 20m, nonstop)

// Delta ‚Ä¢ Wed, Feb 15
// Departure6:40am - Salt Lake City
// Salt Lake City Intl. (SLC)

// 4h 20m flight
// Delta 2827
// Airbus A321WiFi, entertainment and power on this flight
// Economy/Coach (E)
// Arrival1:00pm - Orlando
// Orlando Intl. (MCO)
// `))


// console.log(sell(`
// San Salvador to New York
// 5:40am - 11:42am (29h 2m, 1 stop)5:40am through 11:42am (29h 2m, 1 stop)+1Arrives Sat, Apr 1

// American Airlines ‚Ä¢ Fri, Mar 31
// Departure5:40am - San Salvador
// El Salvador Intl. (SAL)

// 3h 39m flight
// American Airlines 1408
// Boeing 737-800
// Economy/Coach (S)
// Arrival10:19am - Miami
// Miami Intl. (MIA)

// Layover: 22h 23m in Miami
// Departure8:42am - Miami
// Miami Intl. (MIA)

// 3h flight
// American Airlines 1831
// Economy/Coach (S)
// Arrival11:42am - New York
// John F. Kennedy Intl. (JFK)

// Hide details`));


console.log(sell(
    `
    San Salvador to Ankara
7:20am - 10:10pm (29h 50m, 3 stops)7:20am through 10:10pm (29h 50m, 3 stops)+1Arrives Sat, Apr 1

Multiple airlines ‚Ä¢ Fri, Mar 31
Departure7:20am - San Salvador
El Salvador Intl. (SAL)

55m flight
TACA Airlines 396 operated by TACA INTERNATIONAL AIRLINES
Economy/Coach (L)
Arrival8:15am - Managua
Augusto C. Sandino Intl. (MGA)

Layover: 1h in Managua
Departure9:15am - Managua
Augusto C. Sandino Intl. (MGA)

3h 35m flight
TACA Airlines 396 operated by TACA INTERNATIONAL AIRLINES
Economy/Coach (L)
Arrival1:50pm - Miami
Miami Intl. (MIA)

Layover: 5h 10m in Miami
Departure7:00pm - Miami
Miami Intl. (MIA)

9h 30m flight
Lufthansa 461
Airbus A340-600
Economy/Coach (Y)
Arrival10:30am - Munich
Franz Josef Strauss Intl. (MUC)

Arrives Sat, Apr 1
Layover: 7h 50m in Munich
Departure6:20pm - Munich
Franz Josef Strauss Intl. (MUC)

1h 50m flight
Lufthansa 9584 operated by SunExpress
Boeing 737-800
Economy/Coach (Y)
Arrival10:10pm - Ankara
Esenboga (ESB)

Hide details
Your fare: Eco Flex
See fare details
    `
))





</script>


    
</body>
</html>